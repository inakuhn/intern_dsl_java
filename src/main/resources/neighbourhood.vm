<html>
<head>
    <title>Neighbourhood - $townMap.name</title>
</head>
<body>
    <h1>$townMap.name</h1>
    #set($startHorizontal = 1)
    #set($endHorizontal = $townMap.horizontalStreetNumbers)
    #set($rangeHorizontal = [$startHorizontal..$endHorizontal])

    #set($startVertical = 1)
    #set($endVertical = $townMap.verticalStreetNumbers)
    #set($rangeVertical= [$startVertical..$endVertical])

    <table >
    #foreach($i in $rangeVertical)
    <tr>
            #foreach($t in $rangeHorizontal)
            #foreach($home in $townMap.homes)
                #if($i == $home.vertical && $t == $home.horizontal)
                    #if( $home.vertical == 1 && $home.horizontal == 1)
                        <td style="border-bottom: 10px solid #5041f4">
                    <img src="start_home_with_street.png"/>
                    </td>
                    #else
                        #if($home.hasBottom && $home.hasRight)
                            <td style="border-bottom: 10px solid #5041f4;border-right: 10px solid #5041f4">
                                <img src="home_with_street.png"/>
                            </td>
                            #elseif($home.hasBottom)
                                <td style="border-bottom: 10px solid #5041f4;>
                                    <img src="home_with_street.png"/>
                                </td>
                            #elseif($home.hasRight)
                            <td style="border-right: 10px solid #5041f4;>
                                    <img src="home_with_street.png"/>
                            </td>
                            #else
                            <td>
                                    <img src="home_with_street.png"/>
                            </td>


                        #end
                    #end
                #end
            #end
        #end
    </tr>
    #end
    </table>
</body>
<html>
<script>
    document.addEventListener('keydown', function(event) {
        if (event.keyCode == 37) {
            console.log('Left was pressed');
            #set($townMap.startHorizontal = $townMap.startHorizontal - 1)
            #if($townMap.canMove("LEFT"))
                window.location.reload();
            #else
                #set($townMap.startHorizontal = $townMap.startHorizontal + 1)
               alert("You ran out of the Street")
            #end

        }
        else if (event.keyCode == 39) {
            console.log('Right was pressed');
            console.log($townMap.startHorizontal)
            #set($townMap.startHorizontal = $townMap.startHorizontal + 1)
            #if($townMap.canMove("RIGHT"))
                window.location.reload();
            #else
                #set($townMap.startHorizontal = $townMap.startHorizontal - 1)
                alert("You ran out of the Street")
            #end
            window.location.reload();
        }
        else if (event.keyCode == 38) {
            console.log('Up was pressed');
            #set($townMap.startVertical = $townMap.startVertical - 1)
            #if($townMap.canMove("UP"))
                window.location.reload();
            #else
                #set($townMap.startVertical = $townMap.startVertical + 1)
                alert("You ran out of the Street")
            #end
            window.location.reload();
        }
        else if (event.keyCode == 40) {
            console.log('Down was pressed');
            #set($townMap.startVertical = $townMap.startVertical + 1)
            #if($townMap.canMove("DOWN"))
                window.location.reload();
            #else
                #set($townMap.startVertical = $townMap.startVertical - 1)
                alert("You ran out of the Street")
            #end
            window.location.reload();
        }
    }, true)
</script>